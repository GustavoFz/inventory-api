// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id           String @id @default(auto()) @map("_id") @db.ObjectId
  name         String
  email        String @unique
  passwordHash String
  role         String
}

model Product {
  id          String        @id @default(auto()) @map("_id") @db.ObjectId
  name        String
  brand       String?
  subgroup    Subgroup      @relation(fields: [subgroupId], references: [id])
  subgroupId  String        @db.ObjectId
  Transaction Transaction[]
  Brand       Brand?        @relation(fields: [brandId], references: [id])
  brandId     String?       @db.ObjectId

  created_at DateTime @default(now())

  @@map("products")
}

model Brand {
  id         String    @id @default(auto()) @map("_id") @db.ObjectId
  name       String
  product    Product[]
  created_at DateTime  @default(now())

  @@map("brands")
}

model Group {
  id       String     @id @default(auto()) @map("_id") @db.ObjectId
  name     String
  Subgroup Subgroup[]

  created_at DateTime @default(now())

  @@map("groups")
}

model Subgroup {
  id   String @id @default(auto()) @map("_id") @db.ObjectId
  name String

  Group   Group?    @relation(fields: [groupId], references: [id])
  groupId String?   @db.ObjectId
  Product Product[]

  created_at DateTime @default(now())

  @@map("subgroups")
}

model Transaction {
  id        String  @id @default(auto()) @map("_id") @db.ObjectId
  product   Product @relation(fields: [productId], references: [id])
  productId String  @db.ObjectId
  value     Int
  type      String

  created_at DateTime @default(now())

  @@map("transactions")
}

model Token {
  id    String @id @default(auto()) @map("_id") @db.ObjectId
  token String
  email String

  created_at DateTime @default(now())

  @@map("tokens")
}
